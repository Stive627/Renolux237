{"ast":null,"code":"var _jsxFileName = \"/home/stive/Desktop/Apps/Web/Renolux/src/Register/Register.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Navbar from '../ComponentsReno/Navbar';\nimport { fetchLink } from '../Ttools';\nimport { useNavigate } from 'react-router-dom';\nimport '../App.css';\nimport FormAccueil from './FormAccueil';\nimport SecondStep from './SecondStep';\nimport axios from 'axios';\nimport VerificationCodeUI from './VerificationCodeUI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Register() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [password1, setPassword1] = useState('');\n  const [password2, setPassword2] = useState('');\n  const [code, setCode] = useState(undefined);\n  const [username, setUsername] = useState(/[^@]*/.exec(email)[0]);\n  const [steps, setSteps] = useState({\n    one: true,\n    second: false\n  });\n  const [ui, setUI] = useState(0);\n  const navigate = useNavigate();\n  const checkUsername = () => {\n    return true;\n  };\n  const handleFinish = () => {\n    let formData = new FormData();\n    formData.append('username', username);\n    formData.append('email', email);\n    formData.append('password', password1);\n    axios({\n      url: fetchLink('admin/register'),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      data: formData,\n      method: 'POST'\n    }).then(value => {\n      console.log(value);\n      navigate('/admin');\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n  const handleNext = () => {\n    setTimeout(() => {\n      setUI(ui + 1);\n    }, 750);\n  };\n  const handleVerification = () => {\n    let formData = new FormData();\n    formData.append('email', email);\n    axios({\n      url: fetchLink('admin/emailverification'),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      data: formData,\n      method: 'POST'\n    }).then(value => {\n      console.log(value.data);\n      setCode(value.data.code);\n      setUI(1);\n    }).catch(err => console.error(err));\n  };\n\n  //     useEffect(() => {\n  //         fetch('http://localhost:3001/admin/connect',{credentials:'include'})\n  //         .then(v => v.json())\n  //         .then(value =>{\n  //             setEmail(value.email)\n  //             setUsername(value.given_name)\n  //             setUI(2)\n  //         } )\n  //         .catch((err) => console.log(err.response.data))\n  //         }\n  //    ,[])\n  switch (ui) {\n    case 1:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" w-screen h-screen\",\n        children: [/*#__PURE__*/_jsxDEV(Navbar, {\n          right: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 52\n        }, this), /*#__PURE__*/_jsxDEV(VerificationCodeUI, {\n          email: email,\n          code: code,\n          checkUsername: checkUsername,\n          handleFunc: handleNext\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 77\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 16\n      }, this);\n    case 2:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Navbar, {\n          right: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(SecondStep, {\n          value: 'Continuer',\n          valuePassword1: value => setPassword1(value),\n          valuePassword2: value => setPassword2(value),\n          password1: password1,\n          password2: password2,\n          passord1Value: value => setPassword1(value),\n          password2Value: value => setPassword2(value),\n          handleUsername: value => setUsername(value),\n          username: username,\n          handleFinish: handleFinish\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 46\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 16\n      }, this);\n    default:\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Navbar, {\n          right: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(FormAccueil, {\n          email: email,\n          password1: password1,\n          password2: password2,\n          emailValue: value => setEmail(value),\n          passord1Value: value => setPassword1(value),\n          password2Value: value => setPassword2(value),\n          handleVerification: handleVerification\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 47\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 16\n      }, this);\n  }\n}\n_s(Register, \"CAnoAKikcAKr1NvBE7ICKFZ5Qa4=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useEffect","useState","Navbar","fetchLink","useNavigate","FormAccueil","SecondStep","axios","VerificationCodeUI","jsxDEV","_jsxDEV","Register","_s","email","setEmail","password1","setPassword1","password2","setPassword2","code","setCode","undefined","username","setUsername","exec","steps","setSteps","one","second","ui","setUI","navigate","checkUsername","handleFinish","formData","FormData","append","url","headers","data","method","then","value","console","log","catch","err","error","handleNext","setTimeout","handleVerification","className","children","right","fileName","_jsxFileName","lineNumber","columnNumber","handleFunc","valuePassword1","valuePassword2","passord1Value","password2Value","handleUsername","emailValue","_c","$RefreshReg$"],"sources":["/home/stive/Desktop/Apps/Web/Renolux/src/Register/Register.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport Navbar from '../ComponentsReno/Navbar';\nimport { fetchLink } from '../Ttools';\nimport { useNavigate } from 'react-router-dom';\nimport '../App.css'\nimport FormAccueil from './FormAccueil';\nimport SecondStep from './SecondStep';\nimport axios from 'axios';\nimport VerificationCodeUI from './VerificationCodeUI';\n\nfunction Register() {\n    const [email, setEmail]= useState('')\n    const [password1, setPassword1] = useState('')\n    const [password2, setPassword2] = useState('')\n    const [code, setCode] = useState(undefined)\n    const [username, setUsername] = useState(/[^@]*/.exec(email)[0])\n    const [steps, setSteps] = useState({one:true, second:false})\n    const [ui, setUI] = useState(0)\n    const navigate = useNavigate()\n\n    const checkUsername = () =>{\n        return true \n    }\n    const handleFinish = () =>{\n        let formData = new FormData()\n        formData.append('username', username)\n        formData.append('email', email)\n        formData.append('password', password1)\n        axios({url:fetchLink('admin/register'), headers:{\"Content-Type\":\"application/json\"}, data:formData, method:'POST'})\n        .then(value => {console.log(value); navigate('/admin')})\n        .catch(err => {console.error(err)})\n        }\n    const handleNext = () =>{\n        setTimeout(() => {\n            setUI(ui + 1)\n        }, 750);}\n    const handleVerification = () => {\n        let formData = new FormData()\n        formData.append('email', email)\n        axios({url:fetchLink('admin/emailverification'), headers:{\"Content-Type\":\"application/json\"}, data:formData, method:'POST'})\n        .then(value => {console.log(value.data); setCode(value.data.code); setUI(1)})\n        .catch(err =>console.error(err))\n    }\n\n//     useEffect(() => {\n//         fetch('http://localhost:3001/admin/connect',{credentials:'include'})\n//         .then(v => v.json())\n//         .then(value =>{\n//             setEmail(value.email)\n//             setUsername(value.given_name)\n//             setUI(2)\n//         } )\n//         .catch((err) => console.log(err.response.data))\n//         }\n//    ,[])\n   switch(ui){\n    case 1:\n        return <div className=' w-screen h-screen'><Navbar right = {false}/><VerificationCodeUI email={email} code={code} checkUsername={checkUsername} handleFunc={handleNext}/></div>\n    case 2:\n        return <div><Navbar right = {false}/><SecondStep  value={'Continuer'} valuePassword1={(value) => setPassword1(value)} valuePassword2={(value) => setPassword2(value)} password1={password1} password2={password2} passord1Value = {value => setPassword1(value)} password2Value={value =>setPassword2(value)} handleUsername = {(value)=>setUsername(value)} username={username} handleFinish = {handleFinish}/></div>\n    default:\n        return <div> <Navbar right = {false}/><FormAccueil email = {email} password1 = {password1} password2 = {password2} emailValue = {value => setEmail(value)} passord1Value = {value => setPassword1(value)} password2Value={value =>setPassword2(value)} handleVerification={handleVerification} /></div>\n   }\n}\n\nexport default Register"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}